<%= form_with url: shop_path(@shop), method: :get do %>
    <%= text_field_tag :query,
        params[:query],
        placeholder: "Search Product..."
      %>
    <%= submit_tag "Search", name: "", class: "btn btn-primary" %>
<% end %>

<% @unique_categories = @shop.products.distinct.pluck(:category) %>

<% @unique_categories.each do |category| %>
  <div>
    <%= category %>
  </div>
<% end %>

<% if params[:query].present? %>
  <% Product.global_search(params[:query]).each do |product| %>
  <h3><%= product.name %></h3>
  <p><%= product.description %></p>
  <p>Stock: <%= product.stock_quantity %></p>
  <p>Category: <%= product.category %></p>
  <% end %>
<% end %>
