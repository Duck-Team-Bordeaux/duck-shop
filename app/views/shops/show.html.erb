<div class='show-shop-container'>
  <div class='shop-location'>
    <div>
      <h3>DuckShop</h3>
      <p><i class="fa-solid fa-location-dot"></i><%= @shop.location %></p>
    </div>
    <div>
      <p><%= @distance %> km</p>
      <p><i class="fa-solid fa-person-walking"></i><%= @walk_time %> min</p>
    </div>
  </div>
  <div>
    <div class='search'>
      <h3>Disponibility</h3>
      <%= form_with url: shop_path(@shop), method: :get, class: "search-bar-box" do %>
          <%= text_field_tag :query,
              params[:query],
              class: "input-search",
              placeholder: "Search a product..."
            %>
          <%= button_tag "S", name: "", class: "search-bar-btn" do %>
            <i class="fa-solid fa-magnifying-glass" style="color: #ffffff;"></i>
          <% end %>
      <% end %>
    </div>
    <div class="categories">
      <h3>Categories</h3>
      <div>
        <% @categories.each do |category| %>
          <%= link_to shop_products_path(@shop, category: category) do %>
            <div class="card-category">
              <%= image_tag "drinks.jpg", class: "img" %>
              <p><%= category.name %></p>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
    <div class='products'>
      <h3>Products</h3>
    </div>
  </div>
</div>

<div class="shop-show-container my-2 p-3">
<%# Search Bar %>
  <h3 class="my-2">Voir disponibilit√©</h3>
  <%= form_with url: shop_path(@shop), method: :get, class: "search-bar-box" do %>
      <%= text_field_tag :query,
          params[:query],
          class: "input-search",
          placeholder: "Search a product..."
        %>
      <%= button_tag "S", name: "", class: "search-bar-btn" do %>
        <i class="fa-solid fa-magnifying-glass" style="color: #ffffff;"></i>
      <% end %>
  <% end %>

  <%# categories cards %>
  <div class="d-flex justify-content-between mt-3 align-items-end">
    <h3>Rayon</h3>
    <p>tout voir</p>
  </div>
  <div class="category-container row justify-content-around">
    <% @categories.each do |category| %>
      <div class="card-category col-6">
        <%= link_to shop_products_path(@shop, category: category) do %>
          <%= cl_image_tag category.photo.key %>
          <% end %>
          <p><%= category.name %></p>
        </div>
    <% end %>
  </div>

  <%# searched items cards %>
  <% if params[:query].present? %>
    <h3 class="my-2">Produits</h3>
    <% @shop.products.global_search(params[:query]).each do |product| %>
    <h3><%= product.name %></h3>
    <p><%= product.description %></p>
    <p>Stock: <%= product.stock_quantity %></p>
    <p>Category: <%= product.category.name %></p>
    <% end %>
  <% end %>
</div>
<div class='width'>
  <%= link_to 'Enter to the shop', new_shop_cart_path(@shop), :class=>"btn" %>
</div>
